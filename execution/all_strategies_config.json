{
  "strategy_weights": {
    "size": 0.4543,
    "breakout": 0.3223,
    "beta": 0.2234,
    "mean_reversion": 0.0,
    "carry": 0.0,
    "volatility": 0.0,
    "kurtosis": 0.0,
    "days_from_high": 0.0,
    "adf": 0.0,
    "trendline_breakout": 0.0
  },
  "_weights_note": {
    "_comment": "Updated 2025-11-02: Mean-Variance Optimization (MVO) with Volatility Factor capped at 5%. Final optimal allocation achieves Sharpe ratio of 0.891.",
    "_optimization_method": "Constrained Mean-Variance Optimization (MVO)",
    "_portfolio_sharpe": 0.891,
    "_expected_return": "13.62%",
    "_expected_volatility": "15.29%",
    "_expected_max_drawdown": "-30.27%",
    "_reason": "MVO analysis shows Size, Breakout, and Beta provide optimal risk-adjusted returns. Volatility Factor excluded despite 5% cap allowance due to high correlation with Beta (0.570) and low Sharpe (0.316). All negative-Sharpe strategies excluded: Mean Reversion (-0.032), Carry (-0.813), Kurtosis (-0.848), Days from High (-0.241), ADF (failed)."
  },
  "_weights_updated_history": {
    "_2025_11_02_MVO": {
      "_comment": "Mean-Variance Optimization with correlation penalty. Portfolio optimized for maximum Sharpe ratio.",
      "_active_strategies": "Size (45.43%, Sharpe 0.70), Breakout (32.23%, Sharpe 0.46), Beta (22.34%, Sharpe 0.56)",
      "_excluded_strategies": "Volatility (0%, Sharpe 0.32, excluded due to 0.570 correlation with Beta), Mean Reversion (0%, Sharpe -0.032), Carry (0%, Sharpe -0.813), Kurtosis (0%, Sharpe -0.848), Days from High (0%, Sharpe -0.241), ADF (0%, failed backtest), Trendline Breakout (0%, not analyzed)",
      "_optimization_constraint": "Volatility Factor capped at maximum 5%",
      "_portfolio_metrics": {
        "sharpe": 0.891,
        "return": "13.62%",
        "volatility": "15.29%",
        "max_drawdown": "-30.27%"
      },
      "_correlation_analysis": {
        "breakout_diversification": "Near-zero correlation with Size (0.028) and Beta (0.012) - excellent diversifier",
        "volatility_redundant": "High correlation with Beta (0.570) and Size (0.464) - not worth including"
      }
    },
    "_2025_11_02_OLD": {
      "_comment": "OLD WEIGHTS - Weights rebalanced based on 2023-2025 backtest results. Positive Sharpe strategies scaled up, negative Sharpe capped at 5%.",
      "_positive_sharpe": "Size=0.70, Beta=0.56, Breakout=0.46, Volatility=0.32",
      "_negative_sharpe": "Mean Reversion=-0.032 (CAPPED), Kurtosis=-0.85 (CAPPED), Carry=-1.04 (CAPPED), ADF=-0.85 (CAPPED)",
      "_total_positive_sharpe": 2.04
    },
    "_2025_10_30_OLD": {
      "_comment": "OLD WEIGHTS - Weights updated based on Sharpe ratios: Size=0.39, Carry=0.76, Mean Reversion=3.14, Beta=0.68, Volatility=1.41, TLBO=0.36, Kurtosis=0.85",
      "_date": "2025-10-30",
      "_total_sharpe": 7.59,
      "_note": "These weights included an error - Mean Reversion had incorrect Sharpe (3.14 vs actual -0.032)"
    }
  },
  "_removed_strategy": {
    "_comment": "oi_divergence strategy removed - OI data not used anymore",
    "_old_weight": 0.0676894017329385
  },
  "params": {
    "days_from_high": {
      "max_days": 20
    },
    "breakout": {
      "entry_lookback": 50,
      "exit_lookback": 70
    },
    "mean_reversion": {
      "zscore_threshold": 1.5,
      "volume_threshold": 1.0,
      "lookback_window": 30,
      "period_days": 2,
      "limit": 100,
      "long_only": true
    },
    "size": {
      "top_n": 10,
      "bottom_n": 10,
      "limit": 100,
      "rebalance_days": 10,
      "_comment": "Optimal rebalance frequency: 10 days (Sharpe: 0.39, Annual Return: 15.89%). Run strategy every 10 days for best risk-adjusted returns."
    },
    "carry": {
      "exchange_id": "hyperliquid",
      "top_n": 10,
      "bottom_n": 10,
      "rebalance_days": 7,
      "_comment": "Optimal rebalance frequency: 7 days (weekly). Medium-changing factor based on funding rates."
    },
    "beta": {
      "beta_window": 90,
      "volatility_window": 30,
      "rebalance_days": 5,
      "long_percentile": 20,
      "short_percentile": 80,
      "weighting_method": "equal_weight",
      "long_allocation": 0.5,
      "short_allocation": 0.5,
      "_comment": "Optimal rebalance_days=5 based on backtest (Sharpe: 0.68, Return: 26.98%). Betting Against Beta strategy: long low-beta coins, short high-beta coins."
    },
    "trendline_breakout": {
      "trendline_window": 30,
      "volatility_window": 30,
      "breakout_threshold": 1.5,
      "min_r2": 0.5,
      "max_pvalue": 0.05,
      "max_positions": 10,
      "rebalance_days": 1,
      "weighting_method": "equal_weight",
      "long_allocation": 0.5,
      "short_allocation": 0.5,
      "_comment": "Optimal params from backtest (2020-2025): rebalance_days=1 (daily), holding_period=5 days, Total Return: +93.44%, Sharpe: 0.36. Momentum continuation strategy: long uptrend breakouts, short downtrend breakouts."
    },
    "volatility": {
      "volatility_window": 30,
      "num_quintiles": 5,
      "rebalance_days": 3,
      "weighting_method": "equal_weight",
      "long_allocation": 0.5,
      "short_allocation": 0.5,
      "_comment": "Optimal rebalance_days=3 based on backtest (Sharpe: 1.41, Return: 41.77%). Low volatility anomaly: long stable coins, short volatile coins. Sweet spot between capturing vol regime changes and avoiding noise."
    },
    "kurtosis": {
      "kurtosis_window": 30,
      "rebalance_days": 14,
      "long_percentile": 20,
      "short_percentile": 80,
      "weighting_method": "risk_parity",
      "long_allocation": 0.5,
      "short_allocation": 0.5,
      "strategy_type": "mean_reversion",
      "regime_filter": "bear_only",
      "reference_symbol": "BTC/USD",
      "_comment": "REGIME-FILTERED STRATEGY - Only activates in BEAR MARKETS. Mean reversion: long low kurtosis (stable), short high kurtosis (volatile). Performance by regime: Bear/Low-Vol: +28% to +50% annualized (Sharpe 1.79), Bull markets: -25% to -90% annualized (TOXIC). Regime filter prevents activation in bull markets based on 50MA < 200MA on BTC. See docs/KURTOSIS_REGIME_ANALYSIS.md for full analysis."
    },
    "adf": {
      "_status": "ACTIVE - Available for use (set weight > 0 to enable)",
      "adf_window": 60,
      "regression": "ct",
      "volatility_window": 30,
      "rebalance_days": 7,
      "long_percentile": 20,
      "short_percentile": 80,
      "strategy_type": "trend_following_premium",
      "weighting_method": "risk_parity",
      "long_allocation": 0.5,
      "short_allocation": 0.5,
      "_comment": "Optimal params from backtest (2021-2025): Total Return: +126.29%, Sharpe: 0.49, Max DD: -50.60%. Risk parity weighting beat equal weight. Trend Following Premium: long trending coins (high ADF), short stationary coins (low ADF). Currently active with weight=0. Set weight > 0 to enable in portfolio.",
      "_backtest_results": {
        "trend_following_risk_parity": {
          "return": "126.29%",
          "sharpe": 0.49,
          "max_drawdown": "-50.60%"
        },
        "trend_following_equal_weight": {
          "return": "69.32%",
          "sharpe": 0.31,
          "max_drawdown": "-50.38%"
        },
        "mean_reversion_equal_weight": {
          "return": "-71.04%",
          "sharpe": -0.6,
          "max_drawdown": "-87.73%",
          "_note": "DO NOT USE - failed badly"
        }
      }
    }
  }
}
