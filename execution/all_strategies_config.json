{
  "strategy_weights": {
    "mean_reversion": 0.045,
    "size": 0.0801,
    "carry": 0.10,
    "beta": 0.1395,
    "trendline_breakout": 0.0738,
    "volatility": 0.2889,
    "kurtosis": 0.045,
    "breakout": 0.1152,
    "days_from_high": 0.0675,
    "adf": 0.045
  },
  "_weights_note": {
    "_comment": "Updated 2025-11-02 (v2): Carry weight FORCED to 10.00% (doubled from 5%) despite negative Sharpe (-0.814 on 2023-2025 period). Mean Reversion, Kurtosis, and ADF at 4.50% due to negative/zero Sharpe ratios. All other strategies proportionally scaled down by 0.90x to maintain sum=1.0.",
    "_original_mean_reversion_weight": 0.413702239789196,
    "_reason": "Carry forced to 10% for strategic diversification despite recent underperformance (-30.77% total return, -12.26% annualized on 2023-2025 period). Inverted carry test showed -100% loss, confirming signal direction is correct but regime has been unfavorable. Mean Reversion shows +37% in 2023 but -37% in 2024 with 76.9% volatility."
  },
  "_weights_updated_history": {
    "_2025_11_02_v2": {
      "_comment": "Carry weight FORCED to 10.0% (doubled from 5%) for strategic diversification despite negative Sharpe (-0.814). All other strategies proportionally scaled down by 0.9474 to maintain sum=1.0.",
      "_carry_override": "10.0% (forced, despite -30.77% return 2023-2025)",
      "_inverted_carry_test": "Inverted strategy lost -100% (confirms direction is correct, just bad recent regime)"
    },
    "_2025_11_02_v1": {
      "_comment": "Weights rebalanced based on 2023-2025 backtest results. Positive Sharpe strategies scaled up, negative Sharpe capped at 5%.",
      "_positive_sharpe": "Size=0.70, Beta=0.56, Breakout=0.46, Volatility=0.32",
      "_negative_sharpe": "Mean Reversion=-0.032 (CAPPED), Kurtosis=-0.85 (CAPPED), Carry=-1.04 (CAPPED), ADF=-0.85 (CAPPED)",
      "_total_positive_sharpe": 2.04
    },
    "_2025_10_30_OLD": {
      "_comment": "OLD WEIGHTS - Weights updated based on Sharpe ratios: Size=0.39, Carry=0.76, Mean Reversion=3.14, Beta=0.68, Volatility=1.41, TLBO=0.36, Kurtosis=0.85",
      "_date": "2025-10-30",
      "_total_sharpe": 7.59,
      "_note": "These weights included an error - Mean Reversion had incorrect Sharpe (3.14 vs actual -0.032)"
    }
  },
  "_removed_strategy": {
    "_comment": "oi_divergence strategy removed - OI data not used anymore",
    "_old_weight": 0.0676894017329385
  },
  "params": {
    "days_from_high": {
      "max_days": 20
    },
    "breakout": {
      "entry_lookback": 50,
      "exit_lookback": 70
    },
    "mean_reversion": {
      "zscore_threshold": 1.5,
      "volume_threshold": 1.0,
      "lookback_window": 30,
      "period_days": 2,
      "limit": 100,
      "long_only": true
    },
    "size": {
      "top_n": 10,
      "bottom_n": 10,
      "limit": 100,
      "rebalance_days": 10,
      "_comment": "Optimal rebalance frequency: 10 days (Sharpe: 0.39, Annual Return: 15.89%). Run strategy every 10 days for best risk-adjusted returns."
    },
    "carry": {
      "exchange_id": "hyperliquid",
      "top_n": 10,
      "bottom_n": 10,
      "rebalance_days": 7,
      "_comment": "Optimal rebalance frequency: 7 days (weekly). Medium-changing factor based on funding rates."
    },
    "beta": {
      "beta_window": 90,
      "volatility_window": 30,
      "rebalance_days": 5,
      "long_percentile": 20,
      "short_percentile": 80,
      "weighting_method": "equal_weight",
      "long_allocation": 0.5,
      "short_allocation": 0.5,
      "_comment": "Optimal rebalance_days=5 based on backtest (Sharpe: 0.68, Return: 26.98%). Betting Against Beta strategy: long low-beta coins, short high-beta coins."
    },
    "trendline_breakout": {
      "trendline_window": 30,
      "volatility_window": 30,
      "breakout_threshold": 1.5,
      "min_r2": 0.5,
      "max_pvalue": 0.05,
      "max_positions": 10,
      "rebalance_days": 1,
      "weighting_method": "equal_weight",
      "long_allocation": 0.5,
      "short_allocation": 0.5,
      "_comment": "Optimal params from backtest (2020-2025): rebalance_days=1 (daily), holding_period=5 days, Total Return: +93.44%, Sharpe: 0.36. Momentum continuation strategy: long uptrend breakouts, short downtrend breakouts."
    },
    "volatility": {
      "volatility_window": 30,
      "num_quintiles": 5,
      "rebalance_days": 3,
      "weighting_method": "equal_weight",
      "long_allocation": 0.5,
      "short_allocation": 0.5,
      "_comment": "Optimal rebalance_days=3 based on backtest (Sharpe: 1.41, Return: 41.77%). Low volatility anomaly: long stable coins, short volatile coins. Sweet spot between capturing vol regime changes and avoiding noise."
    },
    "kurtosis": {
      "kurtosis_window": 30,
      "rebalance_days": 14,
      "long_percentile": 20,
      "short_percentile": 80,
      "weighting_method": "risk_parity",
      "long_allocation": 0.5,
      "short_allocation": 0.5,
      "strategy_type": "momentum",
      "_comment": "Optimal params from backtest (2022-2025): rebalance_days=14 (bi-weekly), window=30d, Total Return: +181%, Sharpe: 0.81. Momentum strategy: long high kurtosis (volatile), short low kurtosis (stable)."
    },
    "adf": {
      "_status": "ACTIVE - Available for use (set weight > 0 to enable)",
      "adf_window": 60,
      "regression": "ct",
      "volatility_window": 30,
      "rebalance_days": 7,
      "long_percentile": 20,
      "short_percentile": 80,
      "strategy_type": "trend_following_premium",
      "weighting_method": "risk_parity",
      "long_allocation": 0.5,
      "short_allocation": 0.5,
      "_comment": "Optimal params from backtest (2021-2025): Total Return: +126.29%, Sharpe: 0.49, Max DD: -50.60%. Risk parity weighting beat equal weight. Trend Following Premium: long trending coins (high ADF), short stationary coins (low ADF). Currently active with weight=0. Set weight > 0 to enable in portfolio.",
      "_backtest_results": {
        "trend_following_risk_parity": {
          "return": "126.29%",
          "sharpe": 0.49,
          "max_drawdown": "-50.60%"
        },
        "trend_following_equal_weight": {
          "return": "69.32%",
          "sharpe": 0.31,
          "max_drawdown": "-50.38%"
        },
        "mean_reversion_equal_weight": {
          "return": "-71.04%",
          "sharpe": -0.6,
          "max_drawdown": "-87.73%",
          "_note": "DO NOT USE - failed badly"
        }
      }
    }
  }
}
